webpackJsonp([6],{GY0M:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("//Fk"),a=n.n(r),l={data:function(){return{form:{amount:"",lv:"",start:"",end:""},date:!1,list:[]}},created:function(){this.$ICAToken&&this.init()},methods:{init:function(){var t=this;a.a.all([this.$ICAToken.balanceOf("T9yD14Nj9j7xAB4dbGeiX9h8unkKLxmGkn").call(),this.$ICAToken.balanceOf("T9yD14Nj9j7xAB4dbGeiX9h8unkKT76qbH").call(),this.$ICAToken.balanceOf("T9yD14Nj9j7xAB4dbGeiX9h8unkKawPyGg").call(),this.$ICAToken.balanceOf("T9yD14Nj9j7xAB4dbGeiX9h8unkKi6mJHp").call(),this.$ICAToken.balanceOf("T9yD14Nj9j7xAB4dbGeiX9h8unkKsN8FyA").call(),window.tronWeb.transactionBuilder.triggerConstantContract(this.$ICAToken.address,"levelDistribute()",{},[],window.tronWeb.defaultAddress.base58)]).then(function(e){var n=e.slice(-1)[0],r=e.slice(0,-1),a=window.tronWeb.utils.abi.decodeParams(["memberCount","preAwards"],["uint256[6]","uint256[6]"],"0x"+n.constant_result[0]).memberCount;t.list=r.map(function(t,e){return{lv:e+1,balance:t.toString().fromSun(),number:a[e+1].toString()}})})},selectOption:function(t){var e=this;function n(t){return t<10?"0"+t:t}this.$ICAToken.latestDistributeTime(t).call().then(function(t){var r=86400*parseInt(parseInt((new Date).getTime()/1e3)/86400),a=t.toNumber()%86400,l=new Date(1e3*t.toNumber()),o=l.getFullYear(),i=n(l.getMonth()+1),s=n(l.getDate());e.form.start=r-t.toNumber()>=86400?0:a,e.form.end=e.form.start+30,e.date=o+"/"+i+"/"+s})},inputStart:function(){this.form.end=""===this.form.start?"":Number(this.form.start)+30},submit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.$ICAToken.distributeHolderAward(t.form.amount.toSun(),t.form.lv,t.form.start,t.form.end).send({feeLimit:"200".toSun()}).then(function(e){t.$loading(e).then(function(e){e&&t.$refs.form.resetFields()})})})}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px","label-position":"top"}},[n("el-form-item",{attrs:{prop:"lv",label:"等级",rules:{required:!0,message:"等级不能为空"}}},[n("el-select",{attrs:{placeholder:"--请选择--"},on:{change:t.selectOption},model:{value:t.form.lv,callback:function(e){t.$set(t.form,"lv",e)},expression:"form.lv"}},t._l(5,function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),n("el-form-item",{attrs:{prop:"amount",label:"奖金数量",rules:{required:!0,message:"奖金数量不能为空"}}},[n("el-input",{attrs:{type:"number"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}},[n("template",{slot:"append"},[t._v("ICA")])],2)],1),t._v(" "),n("el-form-item",{attrs:{prop:"start",label:"开始位置",rules:{required:!0,message:"开始位置不能为空"}}},[n("el-input",{attrs:{type:"number"},on:{input:t.inputStart},model:{value:t.form.start,callback:function(e){t.$set(t.form,"start",e)},expression:"form.start"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"end",label:"结束位置"}},[n("el-input",{attrs:{readonly:"",type:"number"},model:{value:t.form.end,callback:function(e){t.$set(t.form,"end",e)},expression:"form.end"}})],1),t._v(" "),t.date?n("p",{staticStyle:{color:"#fff"}},[t._v("上次开奖时间："+t._s(t.date))]):t._e(),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[n("el-table-column",{attrs:{prop:"lv",label:"等级",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"balance",label:"余额",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"number",label:"人数",align:"center"}})],1),t._v(" "),n("el-form-item",{staticStyle:{"margin-top":"10px"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("开奖")])],1)],1)],1)},staticRenderFns:[]},i=n("VU/8")(l,o,!1,null,null,null);e.default=i.exports}});
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-051a950b"],{"0bcc":function(n,e,t){"use strict";t.d(e,"a",function(){return s}),t.d(e,"b",function(){return r});var s=function(){var n=this,e=n.$createElement,e=n._self._c||e;return e("div",{staticClass:"smartContract"},[e("PurpleTitle",[e("div",[e("img",{attrs:{src:t("5fb6")}}),e("span",[n._v("智能合约代码")])])]),n._m(0)],1)},r=[function(){var n=this,e=n.$createElement,e=n._self._c||e;return e("div",{staticClass:"smartContractContent"},[e("code",[e("pre",[n._v('pragma solidity 0.5.10;\n\ncontract TRONex {\n    using SafeMath for uint256;\n\n    uint256 constant public INVEST_MIN_AMOUNT = 100 trx;\n    uint256 constant public BASE_PERCENT = 10;\n    uint256[] public REFERRAL_PERCENTS = [50, 20, 5];\n    uint256 constant public MARKETING_FEE = 80;\n    uint256 constant public PROJECT_FEE = 20;\n    uint256 constant public PERCENTS_DIVIDER = 1000;\n    uint256 constant public CONTRACT_BALANCE_STEP = 1000000 trx;\n    uint256 constant public TIME_STEP = 1 days;\n\n    uint256 public totalUsers;\n    uint256 public totalInvested;\n    uint256 public totalWithdrawn;\n    uint256 public totalDeposits;\n\n    address payable public marketingAddress;\n    address payable public projectAddress;\n\n    struct Deposit {\n        uint256 amount;\n        uint256 withdrawn;\n        uint256 start;\n    }\n\n    struct User {\n        Deposit[] deposits;\n        uint256 checkpoint;\n        address referrer;\n        uint256 bonus;\n    }\n\n    mapping (address => User) internal users;\n\n    event Newbie(address user);\n    event NewDeposit(address indexed user, uint256 amount);\n    event Withdrawn(address indexed user, uint256 amount);\n    event RefBonus(address indexed referrer, address indexed referral, uint256 indexed level, uint256 amount);\n    event FeePayed(address indexed user, uint256 totalAmount);\n\n    constructor(address payable marketingAddr, address payable projectAddr) public {\n        require(!isContract(marketingAddr) && !isContract(projectAddr));\n        marketingAddress = marketingAddr;\n        projectAddress = projectAddr;\n    }\n\n    function invest(address referrer) public payable {\n        require(msg.value >= INVEST_MIN_AMOUNT);\n\n        marketingAddress.transfer(msg.value.mul(MARKETING_FEE).div(PERCENTS_DIVIDER));\n        projectAddress.transfer(msg.value.mul(PROJECT_FEE).div(PERCENTS_DIVIDER));\n        emit FeePayed(msg.sender, msg.value.mul(MARKETING_FEE.add(PROJECT_FEE)).div(PERCENTS_DIVIDER));\n\n        User storage user = users[msg.sender];\n\n        if (user.referrer == address(0) && users[referrer].deposits.length > 0 && referrer != msg.sender) {\n            user.referrer = referrer;\n        }\n\n        if (user.referrer != address(0)) {\n\n            address upline = user.referrer;\n            for (uint256 i = 0; i < 3; i++) {\n                if (upline != address(0)) {\n                    uint256 amount = msg.value.mul(REFERRAL_PERCENTS[i]).div(PERCENTS_DIVIDER);\n                    users[upline].bonus = users[upline].bonus.add(amount);\n                    emit RefBonus(upline, msg.sender, i, amount);\n                    upline = users[upline].referrer;\n                } else break;\n            }\n\n        }\n\n        if (user.deposits.length == 0) {\n            user.checkpoint = block.timestamp;\n            totalUsers = totalUsers.add(1);\n            emit Newbie(msg.sender);\n        }\n\n        user.deposits.push(Deposit(msg.value, 0, block.timestamp));\n\n        totalInvested = totalInvested.add(msg.value);\n        totalDeposits = totalDeposits.add(1);\n\n        emit NewDeposit(msg.sender, msg.value);\n\n    }\n\n    function withdraw() public {\n        User storage user = users[msg.sender];\n\n        uint256 userPercentRate = getUserPercentRate(msg.sender);\n\n        uint256 totalAmount;\n        uint256 dividends;\n\n        for (uint256 i = 0; i < user.deposits.length; i++) {\n\n            if (user.deposits[i].withdrawn < user.deposits[i].amount.mul(2)) {\n\n                if (user.deposits[i].start > user.checkpoint) {\n\n                    dividends = (user.deposits[i].amount.mul(userPercentRate).div(PERCENTS_DIVIDER))\n                        .mul(block.timestamp.sub(user.deposits[i].start))\n                        .div(TIME_STEP);\n\n                } else {\n\n                    dividends = (user.deposits[i].amount.mul(userPercentRate).div(PERCENTS_DIVIDER))\n                        .mul(block.timestamp.sub(user.checkpoint))\n                        .div(TIME_STEP);\n\n                }\n\n                if (user.deposits[i].withdrawn.add(dividends) > user.deposits[i].amount.mul(2)) {\n                    dividends = (user.deposits[i].amount.mul(2)).sub(user.deposits[i].withdrawn);\n                }\n\n                user.deposits[i].withdrawn = user.deposits[i].withdrawn.add(dividends); /// changing of storage data\n                totalAmount = totalAmount.add(dividends);\n\n            }\n        }\n\n        uint256 referralBonus = getUserReferralBonus(msg.sender);\n        if (referralBonus > 0) {\n            totalAmount = totalAmount.add(referralBonus);\n            user.bonus = 0;\n        }\n\n        require(totalAmount > 0, "User has no dividends");\n\n        uint256 contractBalance = address(this).balance;\n        if (contractBalance < totalAmount) {\n            totalAmount = contractBalance;\n        }\n\n        user.checkpoint = block.timestamp;\n\n        msg.sender.transfer(totalAmount);\n\n        totalWithdrawn = totalWithdrawn.add(totalAmount);\n\n        emit Withdrawn(msg.sender, totalAmount);\n\n    }\n\n    function getContractBalance() public view returns (uint256) {\n        return address(this).balance;\n    }\n\n    function getContractBalanceRate() public view returns (uint256) {\n        uint256 contractBalance = address(this).balance;\n        uint256 contractBalancePercent = contractBalance.div(CONTRACT_BALANCE_STEP);\n        return BASE_PERCENT.add(contractBalancePercent);\n    }\n\n    function getUserPercentRate(address userAddress) public view returns (uint256) {\n        User storage user = users[userAddress];\n\n        uint256 contractBalanceRate = getContractBalanceRate();\n        if (isActive(userAddress)) {\n            uint256 timeMultiplier = (now.sub(user.checkpoint)).div(TIME_STEP);\n            return contractBalanceRate.add(timeMultiplier);\n        } else {\n            return contractBalanceRate;\n        }\n    }\n\n    function getUserDividends(address userAddress) public view returns (uint256) {\n        User storage user = users[userAddress];\n\n        uint256 userPercentRate = getUserPercentRate(userAddress);\n\n        uint256 totalDividends;\n        uint256 dividends;\n\n        for (uint256 i = 0; i < user.deposits.length; i++) {\n\n            if (user.deposits[i].withdrawn < user.deposits[i].amount.mul(2)) {\n\n                if (user.deposits[i].start > user.checkpoint) {\n\n                    dividends = (user.deposits[i].amount.mul(userPercentRate).div(PERCENTS_DIVIDER))\n                        .mul(block.timestamp.sub(user.deposits[i].start))\n                        .div(TIME_STEP);\n\n                } else {\n\n                    dividends = (user.deposits[i].amount.mul(userPercentRate).div(PERCENTS_DIVIDER))\n                        .mul(block.timestamp.sub(user.checkpoint))\n                        .div(TIME_STEP);\n\n                }\n\n                if (user.deposits[i].withdrawn.add(dividends) > user.deposits[i].amount.mul(2)) {\n                    dividends = (user.deposits[i].amount.mul(2)).sub(user.deposits[i].withdrawn);\n                }\n\n                totalDividends = totalDividends.add(dividends);\n\n                /// no update of withdrawn because that is view function\n\n            }\n\n        }\n\n        return totalDividends;\n    }\n\n    function getUserCheckpoint(address userAddress) public view returns(uint256) {\n        return users[userAddress].checkpoint;\n    }\n\n    function getUserReferrer(address userAddress) public view returns(address) {\n        return users[userAddress].referrer;\n    }\n\n    function getUserReferralBonus(address userAddress) public view returns(uint256) {\n        return users[userAddress].bonus;\n    }\n\n    function getUserAvailable(address userAddress) public view returns(uint256) {\n        return getUserReferralBonus(userAddress).add(getUserDividends(userAddress));\n    }\n\n    function isActive(address userAddress) public view returns (bool) {\n        User storage user = users[userAddress];\n\n        if (user.deposits.length > 0) {\n            if (user.deposits[user.deposits.length-1].withdrawn < user.deposits[user.deposits.length-1].amount.mul(2)) {\n                return true;\n            }\n        }\n    }\n\n    function getUserDepositInfo(address userAddress, uint256 index) public view returns(uint256, uint256, uint256) {\n        User storage user = users[userAddress];\n\n        return (user.deposits[index].amount, user.deposits[index].withdrawn, user.deposits[index].start);\n    }\n\n    function getUserAmountOfDeposits(address userAddress) public view returns(uint256) {\n        return users[userAddress].deposits.length;\n    }\n\n    function getUserTotalDeposits(address userAddress) public view returns(uint256) {\n        User storage user = users[userAddress];\n\n        uint256 amount;\n\n        for (uint256 i = 0; i < user.deposits.length; i++) {\n            amount = amount.add(user.deposits[i].amount);\n        }\n\n        return amount;\n    }\n\n    function getUserTotalWithdrawn(address userAddress) public view returns(uint256) {\n        User storage user = users[userAddress];\n\n        uint256 amount;\n\n        for (uint256 i = 0; i < user.deposits.length; i++) {\n            amount = amount.add(user.deposits[i].withdrawn);\n        }\n\n        return amount;\n    }\n\n    function isContract(address addr) internal view returns (bool) {\n        uint size;\n        assembly { size := extcodesize(addr) }\n        return size > 0;\n    }\n\n}\n\nlibrary SafeMath {\n\n    function add(uint256 a, uint256 b) internal pure returns (uint256) {\n        uint256 c = a + b;\n        require(c >= a, "SafeMath: addition overflow");\n\n        return c;\n    }\n\n    function sub(uint256 a, uint256 b) internal pure returns (uint256) {\n        require(b <= a, "SafeMath: subtraction overflow");\n        uint256 c = a - b;\n\n        return c;\n    }\n\n    function mul(uint256 a, uint256 b) internal pure returns (uint256) {\n        if (a == 0) {\n            return 0;\n        }\n\n        uint256 c = a * b;\n        require(c / a == b, "SafeMath: multiplication overflow");\n\n        return c;\n    }\n\n    function div…')])])])}]},1171:function(n,e,t){"use strict";t.r(e);var s,r=t("52c0"),i=t.n(r);for(s in r)["default"].indexOf(s)<0&&function(n){t.d(e,n,function(){return r[n]})}(s);e.default=i.a},"4dd9":function(n,e,t){"use strict";t.r(e);var s,r=t("0bcc"),i=t("1171");for(s in i)["default"].indexOf(s)<0&&function(n){t.d(e,n,function(){return i[n]})}(s);t("f0fa");var u=t("2877"),r=Object(u.a)(i.default,r.a,r.b,!1,null,"599bd488",null);e.default=r.exports},"52c0":function(n,e){},"5fb6":function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAADoElEQVRYR+2XQYhVdRTGf5/IVCIVEipTSERGaIWoiGi0CJEICZWEiBCJiIgIV+JSWoiICxEREQkJkRAXowhBiIsYMnKwQYZoERFiISEVIiIyzJFvOP/hdnvv3as8ni78b4Z5795zf/ec73znPJEnIp4BNgHPls8G8He/pH+rz5H/iYjHgU+BJwcAUX1EV6CVwAbgJnAZuDMgsB8k3e6UoY3AMuCUpIkBwXR8TCnZVuAF4Jik3x8GoG3A84MEioghYDmwAPgDGJc0WTI0UKCImAN8CLizy7kCfPWggIpm/wQM8gowFzg/cKCImAXsBG4AhyRNRcQ84DPg7wcB9DSwHRiVdK5izB8Dw62A8q1WAYvTqy5Kuno/3Zgm7AxZxCMVIEMOtQV6N+tc7p8CTkj69T6hnI352dVXI2INsB6YaASKiJeA911f4HvA9V6dmbL1G+6eTkS43d/Jm+zUHl2eDkfbAHmkeLRYgH/l7HMwB/1Skruk9YkId5Mz5LlZYK4BZy2DNkD2qIWS9lTq7THj1h2RNN6WJmEcz/4zJuls/d42QMUz9kny8PV2sA54HTjeVkfpzB+ldn7Oufm/crcBeg3YDFjA3wBu2y1Z9zHgW0k9t4OE+QBYBHSF8cv2BMp2fw+wsOtnEpgN/AOcrg7liHjMiTRoxjCMh7f15qx2fYECZKE5+E0PuIpW3gTeAH4DLGiDWYjuNgvR5Xwur7eWRoG3gBcBl+Mn4AlgSS+YiHjZOp32pm6CjIhSKrf7kfoilVryGLAFGNwv1O1cz4681emCiCg6PdYRKCKGAXeDj2EcsOvJfdzm6bf8BTiTbe1yW3MzltEKKO18babfpVia07e1G0eEhe+szuzJEeFx8zZwUpLF3PH8J0MJ43as7ia+8byk7+7BY8rW+UVx74rL9/SrOpBniGeJhWthWmAW4SVJTn2rExEWs/X0tSSXzX5VXL7nalwH+txTNlM9mW36iTVQdecmqtSdR4Jb2t32FLAiZ+DBXjOvDrTLpifpeKXdy6yaSX8TUGakZLtcbjj7Ts95VwfaAbgdp7e3DOwOG5a0uw1I9ZrUjcvumC67baPnqQOV7vgRuAC8mr4yIelUU7B+fF8H8n5jzVhH5diND9d/d/fj4W19yIbm+nv4ud7eTRpT3S/ARqfu14PaxnkE1JSpiJj+CQQc6DZcyzrQFKsf3xvEa80tSXu7AZV1oB8PbBvjnKTRhwHIbu5V2EBTdwGegerCOgq+nwAAAABJRU5ErkJggg=="},"84e4":function(n,e,t){},f0fa:function(n,e,t){"use strict";t("84e4")}}]);